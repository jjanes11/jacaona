<div class="workout-list-container">
  <!-- Quick Start -->
  <section class="jacaona-quick-start">
    <h2 class="jacaona-section-title">Quick Start</h2>
    
    <button class="jacaona-start-empty-workout" (click)="startNewWorkout()">
      <div class="jacaona-plus-icon">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
          <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
        </svg>
      </div>
      <span>Start Empty Workout</span>
    </button>
  </section>

  <!-- Routines -->
  <section class="jacaona-routines">
    <h2 class="jacaona-section-title">Routines</h2>
    
    <button class="jacaona-new-routine-btn" (click)="createNewRoutine()">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
        <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
      </svg>
      <span>New Routine</span>
    </button>

    <!-- Saved Routine Templates -->
    @if (templates().length > 0) {
      <div class="jacaona-saved-routines">
        @for (template of templates(); track template.id) {
          <div 
            class="jacaona-routine-template-card"
            [class.jacaona-drag-over]="dragOverTemplateId() === template.id"
            draggable="true"
            appDraggable
            [dragItemId]="template.id"
            [draggedId]="draggedTemplateId"
            [dragOverId]="dragOverTemplateId"
            (dragReorder)="onTemplateReorder($event)"
          >
            <div class="jacaona-routine-header">
              <div class="jacaona-routine-info">
                <h3 class="jacaona-routine-name">{{ template.name }}</h3>
                <div class="jacaona-routine-exercises">
                  @for (exercise of template.exercises; track exercise.id; let i = $index) {
                    <span class="jacaona-exercise-name">{{ exercise.name }}</span>
                    @if (i < template.exercises.length - 1) {
                      <span class="jacaona-exercise-separator">â€¢</span>
                    }
                  }
                </div>
              </div>
              <app-card-menu 
                [menuId]="template.id"
                [items]="menuItems"
                (action)="handleMenuAction(template.id, $event)">
                <button class="jacaona-routine-menu-btn">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/>
                  </svg>
                </button>
              </app-card-menu>
            </div>
            <button class="jacaona-start-routine-btn" (click)="startRoutine(template)">
              Start Routine
            </button>
          </div>
        }
      </div>
    }
  </section>

  <!-- Delete Confirmation Dialog -->
  <app-confirmation-dialog
    [isVisible]="showDeleteDialog()"
    [message]="'Are you sure you want to delete this routine?'"
    [confirmText]="'Delete Routine'"
    [cancelText]="'Cancel'"
    (confirmed)="confirmDelete()"
    (cancelled)="cancelDelete()"
  />

  <!-- Workout In Progress Confirmation Dialog -->
  @if (showWorkoutInProgressDialog()) {
    <div class="jacaona-dialog-overlay" (click)="cancelStartNewWorkout()">
      <div class="jacaona-dialog" (click)="$event.stopPropagation()">
        <p class="jacaona-dialog-message">You have a workout in progress</p>
        <p class="jacaona-dialog-submessage">If you start a new workout, your old workout will be permanently deleted.</p>
        <button class="jacaona-dialog-btn jacaona-dialog-btn-primary" (click)="resumeWorkout()">
          Resume Workout in Progress
        </button>
        <button class="jacaona-dialog-btn jacaona-dialog-btn-danger-text" (click)="confirmStartNewWorkout()">
          Start New Workout
        </button>
        <button class="jacaona-dialog-btn jacaona-dialog-btn-cancel" (click)="cancelStartNewWorkout()">
          Cancel
        </button>
      </div>
    </div>
  }
</div>
