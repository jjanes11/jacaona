<div class="workout-list-container">
  <!-- Quick Start -->
  <section class="jacaona-quick-start">
    <h2 class="jacaona-section-title">Quick Start</h2>
    
    <button class="jacaona-start-empty-workout" (click)="startNewWorkout()">
      <div class="jacaona-plus-icon">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
          <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
        </svg>
      </div>
      <span>Start Empty Workout</span>
    </button>
  </section>

  <!-- Routines -->
  <section class="jacaona-routines">
    <h2 class="jacaona-section-title">Routines</h2>
    
    <div class="jacaona-routine-cards">
      <button class="jacaona-routine-card" (click)="createNewRoutine()">
        <div class="jacaona-routine-icon">
          <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
            <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
          </svg>
        </div>
        <span>New Routine</span>
      </button>

      <button class="jacaona-routine-card" (click)="exploreRoutines()">
        <div class="jacaona-routine-icon">
          <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
            <path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"/>
          </svg>
        </div>
        <span>Explore Routines</span>
      </button>
    </div>

    <!-- Saved Routine Templates -->
    @if (templates().length > 0) {
      <div class="jacaona-saved-routines">
        @for (template of templates(); track template.id) {
          <div 
            class="jacaona-routine-template-card"
            [class.jacaona-drag-over]="dragOverTemplateId() === template.id"
            draggable="true"
            (dragstart)="onDragStart(template.id, $event)"
            (dragover)="onDragOver(template.id, $event)"
            (dragenter)="onDragEnter(template.id, $event)"
            (dragleave)="onDragLeave(template.id, $event)"
            (drop)="onDrop(template.id, $event)"
            (dragend)="onDragEnd($event)"
            (touchstart)="onTouchStart(template.id, $event)"
            (touchmove)="onTouchMove($event)"
            (touchend)="onTouchEnd($event)"
            (touchcancel)="onTouchEnd($event)"
          >
            <div class="jacaona-routine-header">
              <div class="jacaona-routine-info">
                <h3 class="jacaona-routine-name">{{ template.name }}</h3>
                <div class="jacaona-routine-exercises">
                  @for (exercise of template.exercises; track exercise.id; let i = $index) {
                    <span class="jacaona-exercise-name">{{ exercise.name }}</span>
                    @if (i < template.exercises.length - 1) {
                      <span class="jacaona-exercise-separator">â€¢</span>
                    }
                  }
                </div>
              </div>
              <button class="jacaona-routine-menu-btn" (click)="openMenu(template.id, $event)">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/>
                </svg>
              </button>
            </div>
            <button class="jacaona-start-routine-btn" (click)="startRoutine(template)">
              Start Routine
            </button>
          </div>
        }
      </div>
    }
  </section>

  <!-- Bottom Menu -->
  @if (showMenu()) {
    <div class="jacaona-menu-overlay" (click)="closeMenu()">
      <div class="jacaona-bottom-menu" (click)="$event.stopPropagation()">
        <button class="jacaona-menu-item" (click)="editRoutine()">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="jacaona-menu-icon">
            <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
          </svg>
          <span class="jacaona-menu-text">Edit Routine</span>
        </button>
        <div class="jacaona-menu-separator"></div>
        <button class="jacaona-menu-item jacaona-menu-item-danger" (click)="deleteRoutine()">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="jacaona-menu-icon jacaona-menu-icon-danger">
            <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
          </svg>
          <span class="jacaona-menu-text jacaona-menu-text-danger">Delete Routine</span>
        </button>
      </div>
    </div>
  }

  <!-- Delete Confirmation Dialog -->
  @if (showDeleteDialog()) {
    <div class="jacaona-dialog-overlay" (click)="cancelDelete()">
      <div class="jacaona-dialog" (click)="$event.stopPropagation()">
        <p class="jacaona-dialog-message">Are you sure you want to delete this routine?</p>
        <button class="jacaona-dialog-btn jacaona-dialog-btn-danger" (click)="confirmDelete()">
          Delete Routine
        </button>
        <button class="jacaona-dialog-btn jacaona-dialog-btn-cancel" (click)="cancelDelete()">
          Cancel
        </button>
      </div>
    </div>
  }
</div>
