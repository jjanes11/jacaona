<div class="jacaona-workout-container">
  <!-- Top Bar -->
  <div class="jacaona-top-bar">
    <button class="jacaona-back-btn" (click)="goBack()">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
        <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.42-1.41L7.83 13H20v-2z"/>
      </svg>
    </button>
    <button class="jacaona-finish-btn" (click)="finishWorkout()">
      Finish
    </button>
  </div>

  <!-- Main View -->
  <div class="jacaona-main-view">
    @if (!currentWorkout() || currentWorkout()!.exercises.length === 0) {
      <!-- Empty State - Centered Weight Icon -->
      <div class="jacaona-weight-icon">
        <svg width="80" height="80" viewBox="0 0 24 24" fill="currentColor">
          <path d="M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2 7.71l1.43 1.43L2 10.57 3.43 12 7 8.43 15.57 17 12 20.57 13.43 22l1.43-1.43L16.29 22l2.14-2.14 1.43 1.43 1.43-1.43-1.43-1.43L22 16.29z"/>
        </svg>
      </div>

      <!-- Get Started Text -->
      <h2 class="jacaona-get-started">Get started</h2>
    } @else {
      <!-- Exercises List -->
      <div class="jacaona-exercises-container">
        @for (exercise of currentWorkout()?.exercises || []; track exercise.id) {
          <app-exercise-card
            [exercise]="exercise"
            mode="edit"
            [showMenu]="true"
            [showAddSetButton]="true"
            [showCompleteColumn]="true"
            [menuItems]="menuItems"
            [class.jacaona-drag-over]="dragOverExerciseId() === exercise.id"
            draggable="true"
            appDraggable
            [dragItemId]="exercise.id"
            [draggedId]="draggedExerciseId"
            [dragOverId]="dragOverExerciseId"
            (dragReorder)="onExerciseReorder($event)"
            (action)="onExerciseAction($event)"
          />
        }
      </div>
    }

    <!-- Action Buttons -->
    <div class="jacaona-action-buttons">
      <button class="jacaona-add-exercise-btn" (click)="addExercise()">
        Add Exercise
      </button>
      
      <button class="jacaona-discard-btn" (click)="discardWorkout()">
        Discard Workout
      </button>
    </div>
  </div>

  <!-- Discard Confirmation Dialog -->
  <app-confirmation-dialog
    [isVisible]="showDiscardDialog()"
    message="Are you sure you want to discard this workout?"
    confirmText="Discard Workout"
    cancelText="Cancel"
    (confirmed)="onDiscardConfirmed()"
    (cancelled)="onDiscardCancelled()"
  />

  <!-- Set Type Menu Overlay -->
  @if (showSetTypeMenu() && selectedSet(); as setInfo) {
    <app-set-type-menu
      [workoutId]="currentWorkout()!.id"
      [exerciseId]="setInfo.exerciseId"
      [setId]="setInfo.setId"
      (closed)="closeSetTypeMenu()">
    </app-set-type-menu>
  }
</div>
