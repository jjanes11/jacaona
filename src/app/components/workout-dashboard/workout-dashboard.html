<div class="jacaona-dashboard">
  <!-- Header -->
  <header class="jacaona-dashboard-header">
    <div class="jacaona-header-content">
      <div class="jacaona-greeting">
        <h1 class="jacaona-text-2xl">Good {{ timeOfDay() }}</h1>
        <p class="jacaona-text-secondary jacaona-text-sm">Ready to crush your workout?</p>
      </div>
    </div>
  </header>

  <!-- Quick Stats -->
  <section class="jacaona-stats-grid">
    <div class="jacaona-stat-card">
      <div class="jacaona-stat-icon jacaona-stat-workouts">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
          <path d="M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2 7.71l1.43 1.43L2 10.57 3.43 12 7 8.43 15.57 17 12 20.57 13.43 22l1.43-1.43L16.29 22l2.14-2.14 1.43 1.43 1.43-1.43-1.43-1.43L22 16.29z"/>
        </svg>
      </div>
      <div class="jacaona-stat-content">
        <div class="jacaona-stat-number">{{ totalWorkouts() }}</div>
        <div class="jacaona-stat-label">Workouts</div>
      </div>
    </div>

    <div class="jacaona-stat-card">
      <div class="jacaona-stat-icon jacaona-stat-volume">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
          <path d="M9 11H7v6h2v-6zm4 0h-2v6h2v-6zm4 0h-2v6h2v-6zm2.5-9H19v2h-1.5v16.5c0 1.33-1.17 2.5-2.5 2.5H9c-1.33 0-2.5-1.17-2.5-2.5V4H5V2h3.5l1-1h5l1 1H19z"/>
        </svg>
      </div>
      <div class="jacaona-stat-content">
        <div class="jacaona-stat-number">{{ totalVolume() }}<span class="jacaona-stat-unit">kg</span></div>
        <div class="jacaona-stat-label">Volume</div>
      </div>
    </div>

    <div class="jacaona-stat-card">
      <div class="jacaona-stat-icon jacaona-stat-streak">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
          <path d="M7.5 11L10 7.5 12.5 11 15 7.5 17.5 11H19c1.1 0 2 .9 2 2v8c0 1.1-.9 2-2 2H5c-1.1 0-2-.9-2-2v-8c0-1.1.9-2 2-2h2.5z"/>
        </svg>
      </div>
      <div class="jacaona-stat-content">
        <div class="jacaona-stat-number">{{ currentStreak() }}</div>
        <div class="jacaona-stat-label">Day Streak</div>
      </div>
    </div>

    <div class="jacaona-stat-card">
      <div class="jacaona-stat-icon jacaona-stat-time">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
          <path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"/>
          <path d="M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"/>
        </svg>
      </div>
      <div class="jacaona-stat-content">
        <div class="jacaona-stat-number">{{ avgWorkoutTime() }}<span class="jacaona-stat-unit">min</span></div>
        <div class="jacaona-stat-label">Avg Time</div>
      </div>
    </div>
  </section>

  <!-- Recent Workouts -->
  <section class="jacaona-recent-workouts">
    <div class="jacaona-section-header">
      <h2 class="jacaona-section-title">Recent Workouts</h2>
    </div>

    @if (recentWorkouts().length > 0) {
      <div class="jacaona-workout-list">
        @for (workout of recentWorkouts(); track workout.id) {
          <div class="jacaona-workout-card">
            <div class="jacaona-workout-card-content" (click)="navigateToWorkout(workout.id)">
              <div class="jacaona-workout-header">
                <div class="jacaona-workout-info">
                  <h3 class="jacaona-workout-name">{{ workout.name }}</h3>
                  @if (workout.notes) {
                    <p class="jacaona-workout-description">{{ workout.notes }}</p>
                  }
                  <p class="jacaona-workout-meta">
                    {{ formatWorkoutDate(workout.date) }} • 
                    {{ workout.exercises.length || 0 }} exercises •
                    {{ calculateWorkoutDuration(workout) }}
                  </p>
                </div>
              </div>
              
              @if (workout.exercises && workout.exercises.length > 0) {
                <div class="jacaona-workout-preview">
                  @for (exercise of workout.exercises.slice(0, 3); track exercise.id) {
                    <span class="jacaona-exercise-tag">{{ exercise.name }}</span>
                  }
                  @if (workout.exercises.length > 3) {
                    <span class="jacaona-exercise-more">+{{ workout.exercises.length - 3 }} more</span>
                  }
                </div>
              }
            </div>
            <button class="jacaona-workout-menu-btn" (click)="openMenu(workout.id, $event)">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/>
              </svg>
            </button>
          </div>
        }
      </div>
    } @else {
      <div class="jacaona-empty-state">
        <div class="jacaona-empty-icon">
          <svg width="48" height="48" viewBox="0 0 24 24" fill="currentColor">
            <path d="M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2 7.71l1.43 1.43L2 10.57 3.43 12 7 8.43 15.57 17 12 20.57 13.43 22l1.43-1.43L16.29 22l2.14-2.14 1.43 1.43 1.43-1.43-1.43-1.43L22 16.29z"/>
          </svg>
        </div>
        <h3>No workouts yet</h3>
        <p class="jacaona-text-secondary">Start your first workout to see it here</p>
        <button class="jacaona-btn jacaona-btn-primary" routerLink="/workout/new">
          Start First Workout
        </button>
      </div>
    }
  </section>

  <!-- Bottom Menu -->
  @if (showMenu()) {
    <div class="jacaona-menu-overlay" (click)="closeMenu()">
      <div class="jacaona-bottom-menu" (click)="$event.stopPropagation()">
        <button class="jacaona-menu-item" (click)="saveAsRoutine()">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="jacaona-menu-icon">
            <path d="M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2z"/>
          </svg>
          <span class="jacaona-menu-text">Save as Routine</span>
        </button>
        <div class="jacaona-menu-separator"></div>
        <button class="jacaona-menu-item" (click)="editWorkout()">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="jacaona-menu-icon">
            <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
          </svg>
          <span class="jacaona-menu-text">Edit Workout</span>
        </button>
        <div class="jacaona-menu-separator"></div>
        <button class="jacaona-menu-item jacaona-menu-item-danger" (click)="deleteWorkout()">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="jacaona-menu-icon jacaona-menu-icon-danger">
            <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
          </svg>
          <span class="jacaona-menu-text jacaona-menu-text-danger">Delete Workout</span>
        </button>
      </div>
    </div>
  }

  <!-- Delete Confirmation Dialog -->
  @if (showDeleteDialog()) {
    <div class="jacaona-dialog-overlay" (click)="cancelDelete()">
      <div class="jacaona-dialog" (click)="$event.stopPropagation()">
        <p class="jacaona-dialog-message">Are you sure you want to delete this workout?</p>
        <button class="jacaona-dialog-btn jacaona-dialog-btn-danger" (click)="confirmDelete()">
          Delete Workout
        </button>
        <button class="jacaona-dialog-btn jacaona-dialog-btn-cancel" (click)="cancelDelete()">
          Cancel
        </button>
      </div>
    </div>
  }
</div>

